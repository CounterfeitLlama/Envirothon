<html>

<head>
    <script src="/__/firebase/4.12.1/firebase-app.js"></script>
    <script src="/__/firebase/4.12.1/firebase.js"></script>
    <script src="/__/firebase/4.12.1/firebase-firestore.js"></script>

    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBaiaR31dt4LsEU7U8E17NkGfCpMBkMzIU",
            authDomain: "envirothon-48dfa.firebaseapp.com",
            databaseURL: "https://envirothon-48dfa.firebaseio.com",
            projectId: "envirothon-48dfa",
            storageBucket: "envirothon-48dfa.appspot.com",
            messagingSenderId: "202201538676"
        };
        firebase.initializeApp(config);

        // Initialize Cloud Firestore through Firebase
        var db = firebase.firestore();
    </script>
</head>

<body>
    <p>Sign up here!</p>
    <div>
        <div class="form-group">
            <label for="email">Email address:</label>
            <input type="email" class="form-control" id="email">
        </div>
        <div class="form-group">
            <label for="first">First name:</label>
            <input type="text" class="form-control" id="firstname">
        </div>
        <div class="form-group">
            <label for="last">Last name:</label>
            <input type="text" class="form-control" id="lastname">
        </div>
        <div class="form-group">
            <label for="pwd">Password:</label>
            <input type="password" class="form-control" id="password">
        </div>
        <div class="form-group">
            <label for="age">Birthdate:</label>
            <input type="date" class="form-control" id="birthdate">
        </div>
        <button class="pure-button pure-button-primary" onclick="auth()">Submit</button>
    </div>

    <script type="text/javascript">
        function auth() {
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            var birthdate = document.getElementById("birthdate").value;
            var firstname = document.getElementById("firstname").value;
            var lastname = document.getElementById("lastname").value;

            console.log(email);
            console.log(password)
            firebase.auth().createUserWithEmailAndPassword(email, password).then(function(user) {
                db.collection("users").doc(user.uid).set({
                    first: firstname,
                    last: lastname,
                    email: email,
                    birthdate: birthdate,
                })


            }).catch(function(error) {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(error.code);
                console.log(error.message);
            });
        };
    </script>

    <script type="text/javascript">
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
                var providerData = user.providerData;
                console.log(uid)
                // ...
            } else {
                // User is signed out.
                // ...
            }
        });
    </script>

</body>

</html>
<html>

<head>
    <script src="/__/firebase/4.12.1/firebase-app.js"></script>
    <script src="/__/firebase/4.12.1/firebase.js"></script>
    <script src="/__/firebase/4.12.1/firebase-firestore.js"></script>

    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBaiaR31dt4LsEU7U8E17NkGfCpMBkMzIU",
            authDomain: "envirothon-48dfa.firebaseapp.com",
            databaseURL: "https://envirothon-48dfa.firebaseio.com",
            projectId: "envirothon-48dfa",
            storageBucket: "envirothon-48dfa.appspot.com",
            messagingSenderId: "202201538676"
        };
        firebase.initializeApp(config);

        // Initialize Cloud Firestore through Firebase
        var db = firebase.firestore();
    </script>
</head>

<body>
    <p>Sign up here!</p>
    <div>
        <div class="form-group">
            <label for="email">Email address:</label>
            <input type="email" class="form-control" id="email">
        </div>
        <div class="form-group">
            <label for="first">First name:</label>
            <input type="text" class="form-control" id="firstname">
        </div>
        <div class="form-group">
            <label for="last">Last name:</label>
            <input type="text" class="form-control" id="lastname">
        </div>
        <div class="form-group">
            <label for="pwd">Password:</label>
            <input type="password" class="form-control" id="password">
        </div>
        <div class="form-group">
            <label for="age">Birthdate:</label>
            <input type="date" class="form-control" id="birthdate">
        </div>
        <button class="pure-button pure-button-primary" onclick="auth()">Submit</button>
    </div>

    <script type="text/javascript">
        function auth() {
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            var birthdate = document.getElementById("birthdate").value;
            var firstname = document.getElementById("firstname").value;
            var lastname = document.getElementById("lastname").value;

            console.log(email);
            console.log(password)
            firebase.auth().createUserWithEmailAndPassword(email, password).then(function(user) {
                db.collection("users").doc(user.uid).set({
                    first: firstname,
                    last: lastname,
                    email: email,
                    birthdate: birthdate,
                })


            }).catch(function(error) {
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log(error.code);
                console.log(error.message);
            });
        };
    </script>

    <script type="text/javascript">
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
                var providerData = user.providerData;
                console.log(uid)
                // ...
            } else {
                // User is signed out.
                // ...
            }
        });
    </script>

</body>

</html>
